@startuml

actor App
participant EmployeeService
participant EmployeeRepository
database Datasource
participant FormLetterService
participant FileManager
activate App
App -> EmployeeService: sendFormToEmployeeWithId
activate EmployeeService
EmployeeService -> EmployeeService: getEmployeeById
EmployeeService -> EmployeeRepository: findEmployeeById
activate EmployeeRepository
EmployeeRepository -> Datasource
activate Datasource
alt no employee found
Datasource --> EmployeeRepository: null
EmployeeRepository --> EmployeeService: null
EmployeeService --> App: RuntimeException("No employee found")
end
Datasource --> EmployeeRepository: Employee
deactivate Datasource
EmployeeRepository --> EmployeeService: Employee
deactivate EmployeeRepository
EmployeeService -> FormLetterService: generateWelcomeLetter
activate FormLetterService
FormLetterService -> FileManager: getTextFromFile
activate FileManager
alt file not found
FileManager --> FormLetterService: IOException
FormLetterService --> App: IOException
end
FileManager --> FormLetterService: String
FormLetterService -> FormLetterService: replaceText
FormLetterService -> FileManager: writeTextToFile
FileManager --> FormLetterService
deactivate FileManager
FormLetterService --> EmployeeService
deactivate FormLetterService
EmployeeService --> App
deactivate EmployeeService
deactivate App

@enduml